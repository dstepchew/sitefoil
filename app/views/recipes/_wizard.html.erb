<script src=/bower_components/underscore/underscore-min.js></script>
<script src=/bower_components/underscore.string/dist/underscore.string.min.js></script>
<%= javascript_include_tag "recipe_wizard" %>
<style>
#recipe_wizard, #recipe_wizard input, #recipe_wizard select {
	font-size: 25px !important; margin: 10px 0;
}

select, input, #recipe { border:0; color:#000000; background: #fff;
font-size:20px; font-weight:bold; padding:2px 10px; 
 *background:#FFFFFF; -webkit-appearance: none; }

</style>


<% ApplicationHelper::conditions.each do |condition| %>
	<div class='condition_methods' data-condition-name='<%= condition[:name] %>' style='display:none'>
	  <option value=''>-- select method -- </option>
		<% condition[:methods].each do |method| %>
		  <option value='<%= method %>'><%= ApplicationHelper::human_method(method) %></option>
		<% end %>
	</div>
<% end %>

<div id=condition_template style='display:none'>
  <div class=condition>
	
		if 

		<select id=condition_name onchange='onConditionChange.apply(this)' style='font-size:40px'>
			<option value=''>-- select variable -- </option>
			<% ApplicationHelper::conditions.each do |condition| %>
			  <option value='<%= condition[:name] %>' data-js='<%= condition[:js] %>'><%= condition[:name] %></option>
			<% end %>
		</select>

		<select id=condition_method style='display:none' onchange='onConditionMethodChange.apply(this)'>
		</select>

	  <input id=condition_param style='display:none'>


		<select id=logic onchange='onLogicChange.apply(this)' style='display:none'>
				<option value=''></option>
				<option value='and'>and</option>
		</select>
	</div>

</div>


<div id=recipe_wizard style='font-size:40px'>


	<div id=conditions>

	</div>

	then

	<select id=action onchange='onActionChange()'>
		<option value=''>-- select action -- </option>
		<% ApplicationHelper::actions.each do |action| %>
			<option data-js='<%= action[:js] %>' value='<%= action[:name] %>'><%= action[:name] %></option>
		<% end %>
	</select>

  <span id=action_params>
  </span>

	<% ApplicationHelper::actions.each do |action| %>
		<div class='action_params' data-action-name='<%= action[:name] %>' style='display:none'>
			<% action[:params].each do |param| %>
				<%= param %>: <input name=<%= param %>>
			<% end %>
		</div>
	<% end %>

</div>